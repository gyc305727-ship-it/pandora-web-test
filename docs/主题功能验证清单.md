# 主题切换功能验证清单

## 快速验证步骤

### 1. 启动项目
```bash
cd web
npm run dev
```

### 2. 基础功能验证

- [ ] **主题切换按钮可见**  
  登录后，在顶部导航栏右上角（用户下拉菜单左侧）能看到月亮/太阳图标

- [ ] **点击切换正常**  
  点击图标后，主题立即切换，图标也随之变化（月亮 ↔ 太阳）

- [ ] **提示消息显示**  
  切换时右上角显示"已切换到暗色模式"或"已切换到浅色模式"

- [ ] **过渡效果流畅**  
  切换时颜色变化有平滑的渐变效果，不会突兀

### 3. 视觉效果验证

#### 浅色模式（默认）
- [ ] 整体背景：浅灰色 (#f5f7fa)
- [ ] 卡片背景：白色 (#ffffff)
- [ ] 文字颜色：深色 (#303133)
- [ ] 侧边栏：深蓝灰色 (#304156)

#### 暗色模式
- [ ] 整体背景：深黑色 (#141414)
- [ ] 卡片背景：深灰色 (#1d1d1d)
- [ ] 文字颜色：浅色 (#e8e8e8)
- [ ] 侧边栏：纯黑色 (#1a1a1a)

### 4. 组件适配验证

访问不同页面，验证以下组件在暗色模式下显示正常：

- [ ] **仪表盘页面**  
  - 统计卡片背景和文字清晰可读
  - 日志时间线在暗色背景下显示正常

- [ ] **用户管理页面**  
  - 表格背景和边框适配暗色
  - 搜索框、下拉选择器在暗色下可用
  - 新增/编辑用户弹窗背景正常

- [ ] **公司十大事项页面**  
  - 事项卡片在暗色模式下清晰
  - 编辑弹窗适配暗色主题

### 5. 持久化验证

- [ ] **刷新保持**  
  切换到暗色模式后，按 F5 刷新页面，主题依然是暗色

- [ ] **关闭重开**  
  切换到暗色模式后，关闭浏览器标签页，重新打开系统，主题依然是暗色

- [ ] **localStorage 检查**  
  打开浏览器开发者工具 → Application → Local Storage  
  查看是否有 `pandora-theme` 键，值为 `dark` 或 `light`

### 6. 交互细节验证

- [ ] **图标悬停效果**  
  鼠标悬停在主题切换图标上时，图标变蓝色并稍微放大

- [ ] **Tooltip 提示**  
  鼠标悬停在图标上时，显示"切换到暗色模式"或"切换到浅色模式"

- [ ] **多次切换**  
  连续多次点击切换按钮，每次都能正常切换，无卡顿或错误

### 7. 边界情况验证

- [ ] **首次访问**  
  清除 localStorage 后首次访问，系统使用浅色主题（或跟随系统偏好）

- [ ] **系统偏好检测（可选）**  
  - 清除 localStorage 中的 `pandora-theme`
  - 将操作系统设置为暗色模式
  - 重新访问系统，应自动使用暗色主题

### 8. 兼容性验证

在以下浏览器中测试：
- [ ] Chrome / Edge（推荐）
- [ ] Firefox
- [ ] Safari（如有 Mac）

---

## 常见问题排查

### Q1: 切换后部分区域颜色没变化？
**A**: 检查浏览器控制台是否有 CSS 加载错误，确认 `theme.css` 已正确引入。

### Q2: 刷新后主题恢复默认？
**A**: 检查浏览器是否禁用了 localStorage，或者是否在隐私模式下运行。

### Q3: Element Plus 组件颜色不对？
**A**: 确认 `element-plus/theme-chalk/dark/css-vars.css` 已在 `main.js` 中引入。

### Q4: 切换时有闪烁？
**A**: 这是正常的，因为主题同步在 `onMounted` 时执行。可以通过在 `index.html` 中添加内联脚本提前设置主题类来优化。

---

## 验证通过标准

✅ 所有基础功能验证项通过  
✅ 至少在 2 个主要页面验证组件适配正常  
✅ 持久化功能正常  
✅ 无控制台错误或警告  

---

**验证日期**：_____________  
**验证人**：_____________  
**验证结果**：□ 通过  □ 未通过（备注：_____________）

